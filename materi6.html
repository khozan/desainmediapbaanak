<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi 6: Evaluasi Media - Media PBA Anak</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Nunito', 'sans-serif'],
                        display: ['Fredoka', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            light: '#34d399', // Emerald light
                            DEFAULT: '#059669', // Emerald DEFAULT
                            dark: '#064e3b', // Emerald dark
                        },
                        game: {
                            yellow: '#fbbf24',
                            orange: '#f59e0b',
                            blue: '#3b82f6',
                            red: '#ef4444',
                            purple: '#8b5cf6'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-image: url("https://img.freepik.com/free-vector/hand-drawn-education-pattern-background_23-2149453715.jpg?w=1380&t=st=1709123456~exp=1709124056~hmac=abcdef");
            background-color: #ecfdf5; /* Light Emerald Tint */
            background-blend-mode: overlay;
            background-attachment: fixed;
            background-size: cover;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        /* FLIP CARD STYLES */
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
            cursor: pointer;
            height: 320px;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 1rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            overflow: hidden;
        }

        .flip-card-front {
            background-color: white;
            color: black;
            border: 2px solid #d1fae5;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #059669, #34d399);
            color: white;
            transform: rotateY(180deg);
            overflow-y: auto;
            justify-content: start;
            padding-top: 2rem;
            border: 2px solid #059669;
        }

        /* Quiz & Timer Styles */
        .option-label { cursor: pointer; transition: all 0.2s ease; }
        .option-input:checked + .option-label {
            background-color: #d1fae5;
            border-color: #059669;
            color: #064e3b;
            box-shadow: 0 4px 6px -1px rgba(5, 150, 105, 0.2);
            transform: translateY(-2px);
        }
        .option-input:checked + .option-label .circle-check {
            background-color: #059669;
            border-color: #059669;
        }
        .option-input:checked + .option-label .circle-check::after {
            content: '✔'; color: white; font-size: 10px; display: flex; align-items: center; justify-content: center;
        }

        .timer-warning {
            animation: pulse-red 1s infinite;
            background-color: #fee2e2 !important;
            color: #b91c1c !important;
            border-color: #b91c1c !important;
        }
        @keyframes pulse-red {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }

        /* Scroll Progress */
        #reading-progress-container {
            position: fixed;
            top: 64px; left: 0; width: 100%; height: 6px; background: rgba(229, 231, 235, 0.5); z-index: 40;
        }
        #reading-progress-bar {
            height: 100%; background: linear-gradient(90deg, #34d399, #059669); width: 0%; transition: width 0.1s;
        }
    </style>
</head>
<body class="antialiased text-gray-800 min-h-screen flex flex-col">

    <!-- READING PROGRESS -->
    <div id="reading-progress-container">
        <div id="reading-progress-bar"></div>
    </div>

    <!-- NAVBAR -->
    <nav class="sticky top-0 z-50 glass-panel border-b border-white/40">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <a href="index.html" class="flex items-center gap-2 text-gray-600 hover:text-brand transition font-bold">
                    <i class="fa-solid fa-arrow-left"></i> Kembali
                </a>
                <div class="text-center">
                    <h1 class="font-display font-bold text-lg text-brand-dark hidden md:block">Evaluasi Media Pembelajaran</h1>
                    <span class="text-xs font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Level 6</span>
                </div>
                <div class="flex items-center gap-2">
                    <span id="user-name" class="text-xs font-bold text-gray-500 hidden sm:block">Loading...</span>
                    <div class="w-8 h-8 rounded-full bg-brand/20 flex items-center justify-center text-brand">
                        <i class="fa-solid fa-user"></i>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- CONTENT -->
    <main class="flex-grow w-full max-w-6xl mx-auto p-4 md:p-6 pb-20 space-y-12">

        <!-- HEADER MATERI -->
        <div class="glass-panel p-10 rounded-3xl relative overflow-hidden text-center transform transition hover:scale-[1.01] duration-500">
            <div class="absolute -top-10 -left-10 w-40 h-40 bg-green-500/10 rounded-full blur-2xl animate-pulse"></div>
            <div class="absolute bottom-10 right-10 w-40 h-40 bg-teal-500/10 rounded-full blur-2xl animate-pulse" style="animation-delay: 1s;"></div>
            
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-green-400 to-teal-600 text-white text-4xl mb-6 shadow-xl transform -rotate-6 hover:rotate-0 transition duration-300">
                <i class="fa-solid fa-clipboard-check"></i>
            </div>
            <h2 class="font-display font-bold text-4xl text-gray-800 mb-3">Evaluasi Media Pembelajaran</h2>
            <p class="text-lg text-gray-500 max-w-2xl mx-auto">Kriteria dan teknik penilaian untuk memastikan efektivitas media Bahasa Arab anak.</p>
        </div>

        <!-- HERO INTRO -->
        <div class="glass-panel p-8 rounded-3xl overflow-hidden shadow-xl border-4 border-white/50 relative">
            <div class="absolute inset-0 bg-gradient-to-r from-green-600/10 to-teal-500/10 pointer-events-none"></div>
            <div class="flex flex-col md:flex-row items-center gap-8 relative z-10">
                <div class="w-full md:w-1/2 text-center md:text-left space-y-4">
                    <span class="inline-block bg-brand/10 text-brand font-bold px-3 py-1 rounded-full text-xs uppercase tracking-wide mb-2">Penjaminan Mutu</span>
                    <h3 class="font-display font-bold text-3xl md:text-4xl text-gray-800 leading-tight">
                        Mengukur Kualitas <br><span class="text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-teal-500">Bukan Sekadar Estetika</span>
                    </h3>
                    <p class="text-gray-600 leading-relaxed">
                        Media yang menarik secara visual belum tentu efektif secara pedagogis. Evaluasi adalah kunci untuk memastikan media tidak hanya menghibur, tetapi juga <b>mencerdaskan</b>, sesuai dengan karakteristik kognitif, sosial, dan budaya anak.
                    </p>
                    <div class="flex flex-wrap gap-3 justify-center md:justify-start mt-4">
                        <div class="flex items-center gap-2 bg-white px-4 py-2 rounded-xl shadow-sm text-sm font-bold text-gray-700">
                            <i class="fa-solid fa-check-circle text-green-500"></i> Valid
                        </div>
                        <div class="flex items-center gap-2 bg-white px-4 py-2 rounded-xl shadow-sm text-sm font-bold text-gray-700">
                            <i class="fa-solid fa-rotate text-blue-500"></i> Reliabel
                        </div>
                        <div class="flex items-center gap-2 bg-white px-4 py-2 rounded-xl shadow-sm text-sm font-bold text-gray-700">
                            <i class="fa-solid fa-users text-orange-500"></i> User-Friendly
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 flex justify-center">
                    <!-- Ilustrasi Evaluasi -->
                    <img src="https://img.freepik.com/free-vector/audit-concept-illustration_114360-6078.jpg" alt="Evaluasi Media" class="w-full max-w-sm rounded-2xl shadow-2xl transform rotate-2 hover:rotate-0 transition duration-500">
                </div>
            </div>
        </div>

        <!-- ISI MATERI (INTERAKTIF) -->
        <article class="space-y-16">
            
            <!-- I. KRITERIA EVALUASI (GRID FLIP CARDS) -->
            <div>
                <div class="flex items-center gap-3 mb-6">
                    <div class="bg-brand text-white w-10 h-10 rounded-lg flex items-center justify-center font-bold text-xl"><i class="fa-solid fa-list-check"></i></div>
                    <h3 class="font-display font-bold text-3xl text-gray-800">1. Kriteria Evaluasi Utama</h3>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    
                    <!-- Kriteria 1 -->
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="w-16 h-16 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-3xl mb-4"><i class="fa-solid fa-book-open"></i></div>
                                <h4 class="font-bold text-xl text-gray-800">Kejelasan Konten</h4>
                                <span class="mt-auto text-xs font-bold text-brand uppercase tracking-wider">Detail <i class="fa-solid fa-arrow-right"></i></span>
                            </div>
                            <div class="flip-card-back">
                                <h5 class="font-bold text-white mb-2">Konten & Bahasa</h5>
                                <ul class="text-xs text-left px-4 list-disc space-y-2">
                                    <li>Sesuai usia & perkembangan.</li>
                                    <li>Akurat (Nahwu/Sharaf).</li>
                                    <li>Adaptasi budaya (kontekstual).</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Kriteria 2 -->
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="w-16 h-16 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-3xl mb-4"><i class="fa-solid fa-gamepad"></i></div>
                                <h4 class="font-bold text-xl text-gray-800">Interaktivitas</h4>
                                <span class="mt-auto text-xs font-bold text-brand uppercase tracking-wider">Detail <i class="fa-solid fa-arrow-right"></i></span>
                            </div>
                            <div class="flip-card-back">
                                <h5 class="font-bold text-white mb-2">Partisipasi Aktif</h5>
                                <ul class="text-xs text-left px-4 list-disc space-y-2">
                                    <li>Game edukatif & kuis.</li>
                                    <li>Keterlibatan kognitif (bukan pasif).</li>
                                    <li>Contoh: Kahoot!, Drag-and-drop.</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Kriteria 3 -->
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="w-16 h-16 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-3xl mb-4"><i class="fa-solid fa-earth-asia"></i></div>
                                <h4 class="font-bold text-xl text-gray-800">Relevansi Budaya</h4>
                                <span class="mt-auto text-xs font-bold text-brand uppercase tracking-wider">Detail <i class="fa-solid fa-arrow-right"></i></span>
                            </div>
                            <div class="flip-card-back">
                                <h5 class="font-bold text-white mb-2">Konteks Sosial</h5>
                                <ul class="text-xs text-left px-4 list-disc space-y-2">
                                    <li>Sesuai realitas siswa.</li>
                                    <li>Nilai sosial positif.</li>
                                    <li>Materi komunikatif.</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Kriteria 4 -->
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="w-16 h-16 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-3xl mb-4"><i class="fa-solid fa-universal-access"></i></div>
                                <h4 class="font-bold text-xl text-gray-800">Aksesibilitas</h4>
                                <span class="mt-auto text-xs font-bold text-brand uppercase tracking-wider">Detail <i class="fa-solid fa-arrow-right"></i></span>
                            </div>
                            <div class="flip-card-back">
                                <h5 class="font-bold text-white mb-2">Keterjangkauan</h5>
                                <ul class="text-xs text-left px-4 list-disc space-y-2">
                                    <li>Mudah digunakan (Usability).</li>
                                    <li>Tidak butuh spek tinggi.</li>
                                    <li>Opsi offline tersedia.</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- II. TEKNIK PENILAIAN -->
            <div>
                <div class="flex items-center gap-3 mb-6">
                    <div class="bg-game-blue text-white w-10 h-10 rounded-lg flex items-center justify-center font-bold text-xl"><i class="fa-solid fa-chart-pie"></i></div>
                    <h3 class="font-display font-bold text-3xl text-gray-800">2. Teknik Penilaian</h3>
                </div>

                <div class="space-y-4">
                    <!-- Teknik 1 -->
                    <div class="bg-white p-5 rounded-xl border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <h4 class="font-bold text-gray-800 mb-2 flex justify-between">
                            <span><i class="fa-solid fa-arrow-trend-up text-blue-500 mr-2"></i> Pre-test & Post-test</span>
                            <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded">Kuantitatif</span>
                        </h4>
                        <p class="text-sm text-gray-600">Mengukur peningkatan hasil belajar secara objektif sebelum dan sesudah penggunaan media.</p>
                    </div>

                    <!-- Teknik 2 -->
                    <div class="bg-white p-5 rounded-xl border-l-4 border-yellow-500 shadow-sm hover:shadow-md transition">
                        <h4 class="font-bold text-gray-800 mb-2 flex justify-between">
                            <span><i class="fa-solid fa-pen-to-square text-yellow-500 mr-2"></i> Asesmen Formatif & Sumatif</span>
                            <span class="text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded">Proses & Akhir</span>
                        </h4>
                        <p class="text-sm text-gray-600">Formatif (kuis interaktif saat belajar) untuk umpan balik segera, Sumatif untuk nilai akhir.</p>
                    </div>

                    <!-- Teknik 3 -->
                    <div class="bg-white p-5 rounded-xl border-l-4 border-purple-500 shadow-sm hover:shadow-md transition">
                        <h4 class="font-bold text-gray-800 mb-2 flex justify-between">
                            <span><i class="fa-solid fa-magnifying-glass-chart text-purple-500 mr-2"></i> Validasi Psikometrik</span>
                            <span class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded">Validitas</span>
                        </h4>
                        <p class="text-sm text-gray-600">Menguji validitas isi, konstruk, dan reliabilitas instrumen agar hasil evaluasi akurat.</p>
                    </div>

                    <!-- Teknik 4 -->
                    <div class="bg-white p-5 rounded-xl border-l-4 border-pink-500 shadow-sm hover:shadow-md transition">
                        <h4 class="font-bold text-gray-800 mb-2 flex justify-between">
                            <span><i class="fa-solid fa-comments text-pink-500 mr-2"></i> Umpan Balik Kualitatif</span>
                            <span class="text-xs bg-pink-100 text-pink-600 px-2 py-1 rounded">Kualitatif</span>
                        </h4>
                        <p class="text-sm text-gray-600">Wawancara, angket, dan observasi untuk mendapatkan insight mendalam dari pengguna.</p>
                    </div>
                </div>
            </div>

            <!-- III. MODEL TERPADU & KESIMPULAN -->
            <div class="grid md:grid-cols-2 gap-6">
                <div class="glass-panel p-6 rounded-2xl bg-gradient-to-br from-green-50 to-white">
                    <h3 class="font-bold text-xl text-brand mb-3"><i class="fa-solid fa-layer-group"></i> Model Evaluasi Terpadu</h3>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li class="flex items-center gap-2"><i class="fa-solid fa-circle-check text-green-500"></i> Evaluasi Konten (Validitas)</li>
                        <li class="flex items-center gap-2"><i class="fa-solid fa-circle-check text-green-500"></i> Evaluasi Desain (Interaktivitas)</li>
                        <li class="flex items-center gap-2"><i class="fa-solid fa-circle-check text-green-500"></i> Evaluasi Dampak (Hasil Belajar)</li>
                        <li class="flex items-center gap-2"><i class="fa-solid fa-circle-check text-green-500"></i> Evaluasi Penerimaan (User Acceptance)</li>
                    </ul>
                </div>
                <div class="glass-panel p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-white">
                    <h3 class="font-bold text-xl text-blue-600 mb-3"><i class="fa-solid fa-lightbulb"></i> Kesimpulan</h3>
                    <p class="text-sm text-gray-600 leading-relaxed">
                        Evaluasi harus <b>sistematis dan multidimensional</b>. Media yang efektif adalah yang menyeimbangkan estetika visual dengan validitas pedagogis, serta terbukti meningkatkan kualitas pembelajaran Bahasa Arab secara berkelanjutan.
                    </p>
                </div>
            </div>

            <!-- Referensi Accordion -->
            <details class="glass-panel p-5 rounded-2xl group cursor-pointer transition-all duration-300">
                <summary class="flex justify-between items-center font-bold text-gray-700 list-none select-none">
                    <span class="flex items-center gap-2 text-lg"><i class="fa-solid fa-graduation-cap text-brand"></i> Referensi Akademik Lengkap</span>
                    <span class="transition-transform duration-300 group-open:rotate-180 bg-gray-100 p-2 rounded-full w-8 h-8 flex items-center justify-center hover:bg-gray-200"><i class="fa-solid fa-chevron-down text-sm"></i></span>
                </summary>
                <div class="mt-4 pt-4 border-t border-gray-100 animate-fade-in-up">
                    <ul class="space-y-3 text-xs text-gray-600 font-mono text-justify pl-2">
                        <li>Achour, H., & Ben Abdesslam, W. (2012). An evaluation of Arabic language learning websites. <i>International Conference on Education and e-Learning Innovations</i>.</li>
                        <li>Alhamami, M., Alduais, A., Qasem, F., et al. (2024). Psychometric Features of the Arabic Version of the Children’s Communication Checklist (CCC2). <i>Journal of Multidisciplinary Healthcare</i>.</li>
                        <li>Eltahir, M. E., Alsalhi, N. R., Al-Qatawneh, S., et al. (2021). The impact of game-based learning (GBL) on students’ motivation, engagement and academic performance. <i>Education and Information Technologies</i>.</li>
                        <li>Khaira, M., Ritonga, M., & Halim, S. (2021). The Effectiveness of Scrabble Game Media in Improving Learning Outcomes. <i>Journal of Physics: Conference Series</i>.</li>
                        <li>Koderi, Sufian, M., & Erlina. (2023). Developing Lampung Local Wisdom Film of Arabic Communication Skills. <i>International Journal of Information and Education Technology</i>.</li>
                        <li>Malkawi, S. H., et al. (2015). Development of the Arabic Version of the Preschool Activity Card Sort (A-PACS). <i>Child: Care, Health and Development</i>.</li>
                        <li>Ritonga, M., et al. (2024). Enhancing Arabic Language Learning in Higher Education: Leveraging E-Campus. <i>Jurnal Ilmiah Peuradeun</i>.</li>
                        <li>Zainuldin, S. N. B. M., et al. (2016). The effectiveness of MyFurqan for learning basic Al-Quran. <i>IEEE Conference</i>.</li>
                    </ul>
                </div>
            </details>

        </article>

        <!-- QUIZ GAME SECTION -->
        <section id="quiz-section" class="mt-12 relative">
            
            <!-- START PANEL -->
            <div id="start-panel" class="glass-panel p-10 rounded-3xl text-center shadow-2xl transform transition hover:scale-[1.02] duration-300 relative overflow-hidden border-2 border-white/50">
                <div class="absolute inset-0 bg-gradient-to-br from-green-500/10 to-teal-500/10 z-0"></div>
                <div class="relative z-10 flex flex-col items-center">
                    <div class="w-24 h-24 bg-gradient-to-br from-green-500 to-teal-500 rounded-full flex items-center justify-center mb-6 shadow-lg shadow-green-200 animate-bounce">
                        <i class="fa-solid fa-check-double text-4xl text-white"></i>
                    </div>
                    <h2 class="font-display font-bold text-3xl text-gray-800 mb-2">Tantangan Evaluasi</h2>
                    <div class="flex items-center gap-4 text-sm text-gray-500 font-bold mb-8 bg-white/50 px-4 py-2 rounded-full">
                        <span><i class="fa-regular fa-clock text-red-500"></i> 15 Menit</span>
                        <span>•</span>
                        <span><i class="fa-solid fa-list-check text-blue-500"></i> 20 Soal</span>
                        <span>•</span>
                        <span><i class="fa-solid fa-trophy text-yellow-500"></i> Min. 80</span>
                    </div>
                    <button onclick="startQuiz()" class="bg-gradient-to-r from-brand to-teal-600 hover:from-brand-light hover:to-brand text-white font-bold py-4 px-12 rounded-2xl shadow-xl shadow-brand/30 text-lg transition transform active:scale-95 flex items-center gap-3">
                        <span>Mulai Kuis</span> <i class="fa-solid fa-play"></i>
                    </button>
                </div>
            </div>

            <!-- TIMER STICKY -->
            <div id="timer-display" class="hidden fixed top-20 right-4 md:right-10 z-40 bg-white/90 backdrop-blur border-2 border-brand text-brand-dark px-5 py-2 rounded-full font-mono font-bold shadow-lg flex items-center gap-2 transform scale-110">
                <i class="fa-regular fa-clock animate-pulse"></i> <span id="time-left" class="text-lg">15:00</span>
            </div>

            <!-- QUIZ FORM -->
            <form id="quiz-form" onsubmit="event.preventDefault(); submitQuiz();" class="hidden space-y-6 mt-6">
                <div id="questions-container" class="space-y-6"></div>

                <div class="glass-panel p-6 rounded-2xl sticky bottom-4 z-40 border-t-4 border-brand shadow-2xl">
                    <div class="flex justify-between items-center">
                        <div class="text-sm font-bold text-gray-600">
                            Terjawab: <span id="answered-count" class="text-brand text-lg">0</span>/20
                        </div>
                        <button type="submit" id="btn-submit" class="bg-brand hover:bg-brand-dark text-white font-bold py-3 px-8 rounded-xl shadow-lg transform active:scale-95 transition flex items-center gap-2">
                            <span>Kirim Jawaban</span> <i class="fa-solid fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </form>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="bg-white border-t py-6 mt-10">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <p class="font-display font-bold text-gray-400 text-sm">© 2024 Desain Pengembangan Media Ajar Bahasa Arab.</p>
        </div>
    </footer>

    <!-- LOGIC -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
        import { getFirestore, doc, updateDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA-jHdi3VVu9F5i6tLIjGJCcVFfHBieqbI",
            authDomain: "desain-mediapba-anak.firebaseapp.com",
            projectId: "desain-mediapba-anak",
            storageBucket: "desain-mediapba-anak.firebasestorage.app",
            messagingSenderId: "118347735703",
            appId: "1:118347735703:web:bafeb4590ddbe85f7c7fd2",
            measurementId: "G-RN0S3X8V27"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUser = null;
        let quizInterval;
        let timeRemaining = 15 * 60; 

        // READING PROGRESS
        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("reading-progress-bar").style.width = scrolled + "%";
        };

        // SOAL MATERI 6 (20 SOAL)
        const quizData = [
            { q: "Tujuan utama evaluasi media pembelajaran adalah untuk …", options: ["Mengurangi biaya produksi", "Menilai efektivitas media dalam mencapai tujuan pembelajaran", "Mengganti kurikulum", "Menentukan jumlah siswa", "Meningkatkan durasi pembelajaran"], a: 1 },
            { q: "Salah satu kriteria evaluasi media adalah …", options: ["Popularitas aplikasi", "Kejelasan konten", "Harga perangkat", "Jumlah animasi", "Tren teknologi"], a: 1 },
            { q: "Evaluasi yang dilakukan sebelum dan sesudah penggunaan media disebut …", options: ["Evaluasi formatif", "Evaluasi sumatif", "Pre-test dan post-test", "Observasi kualitatif", "Validasi ahli"], a: 2 },
            { q: "Kahoot! dalam pembelajaran bahasa Arab dapat digunakan sebagai …", options: ["Buku teks", "Media cetak", "Alat asesmen formatif", "Modul statis", "Instrumen psikometrik"], a: 2 },
            { q: "Mengapa adaptasi budaya penting dalam media pembelajaran Bahasa Arab?", options: ["Agar terlihat modern", "Agar sesuai dengan tren global", "Agar lebih mudah dipahami dan diterima anak", "Untuk mengurangi biaya produksi", "Untuk memperpanjang durasi pembelajaran"], a: 2 },
            { q: "Interaktivitas dalam media pembelajaran bertujuan untuk …", options: ["Mengurangi partisipasi anak", "Mendorong keterlibatan aktif anak", "Menggantikan peran guru", "Menghilangkan evaluasi", "Menyederhanakan kurikulum"], a: 1 },
            { q: "Asesmen formatif dilakukan untuk …", options: ["Memberikan nilai akhir saja", "Mengukur hasil akhir pembelajaran", "Memberikan umpan balik selama proses pembelajaran", "Menggantikan pre-test", "Menghapus revisi media"], a: 2 },
            { q: "Validasi psikometrik bertujuan untuk memastikan …", options: ["Media menarik secara visual", "Instrumen evaluasi valid dan reliabel", "Media memiliki animasi", "Media mudah diunduh", "Media populer"], a: 1 },
            { q: "Jika guru ingin mengukur peningkatan kosakata setelah penggunaan aplikasi, teknik yang tepat adalah …", options: ["Observasi informal", "Pre-test dan post-test", "Diskusi kelompok", "Wawancara orang tua", "Survei kepuasan"], a: 1 },
            { q: "Untuk mengetahui respons siswa terhadap tampilan media, metode yang paling tepat adalah …", options: ["Ujian tulis", "Tes lisan", "Umpan balik kualitatif", "Pre-test", "Validasi konstruk"], a: 2 },
            { q: "Jika media memiliki konten kompleks dan sulit dipahami anak, kriteria yang belum terpenuhi adalah …", options: ["Aksesibilitas", "Interaktivitas", "Kejelasan konten", "Validitas", "Motivasi"], a: 2 },
            { q: "Untuk menilai keterampilan berbicara yang tidak dapat diukur secara optimal oleh platform daring, guru dapat menggunakan …", options: ["Poster", "Observasi langsung", "Flashcard", "Infografis", "Video animasi"], a: 1 },
            { q: "Sebuah media menarik secara visual tetapi tidak meningkatkan hasil belajar. Masalah utama kemungkinan terletak pada …", options: ["Popularitas media", "Desain warna", "Ketidakefektifan dalam mencapai tujuan pembelajaran", "Jumlah animasi", "Harga aplikasi"], a: 2 },
            { q: "Jika instrumen evaluasi tidak konsisten dalam mengukur kemampuan siswa, maka masalahnya berkaitan dengan …", options: ["Interaktivitas", "Validitas budaya", "Reliabilitas", "Motivasi", "Aksesibilitas"], a: 2 },
            { q: "Media berbasis game meningkatkan motivasi tetapi tidak dievaluasi dampaknya terhadap hasil belajar. Tahap evaluasi yang kurang adalah …", options: ["Evaluasi visual", "Evaluasi sumatif", "Evaluasi desain", "Evaluasi budaya", "Evaluasi teknis"], a: 1 },
            { q: "Platform daring efektif untuk pembelajaran, tetapi memiliki keterbatasan dalam menilai keterampilan berbicara. Hal ini menunjukkan perlunya …", options: ["Menghapus platform", "Mengganti kurikulum", "Kombinasi teknik evaluasi", "Mengurangi interaksi", "Menghilangkan asesmen"], a: 2 },
            { q: "Media pembelajaran Bahasa Arab dinilai efektif jika …", options: ["Memiliki banyak animasi", "Digunakan di banyak sekolah", "Meningkatkan hasil belajar dan keterlibatan anak", "Gratis", "Berbasis teknologi tinggi"], a: 2 },
            { q: "Jika hasil post-test tidak menunjukkan peningkatan signifikan, langkah yang tepat adalah …", options: ["Mengabaikan hasil", "Menghapus evaluasi", "Melakukan revisi media berdasarkan analisis hasil", "Menyalahkan siswa", "Mengurangi materi"], a: 2 },
            { q: "Evaluasi komprehensif media pembelajaran sebaiknya mencakup …", options: ["Aspek visual saja", "Aspek kognitif saja", "Aspek konten, interaktivitas, budaya, dan aksesibilitas", "Aspek teknologi saja", "Aspek biaya saja"], a: 2 },
            { q: "Secara keseluruhan, evaluasi media pembelajaran Bahasa Arab untuk anak harus dilakukan secara …", options: ["Satu kali di akhir pembelajaran", "Tanpa melibatkan pengguna", "Berkelanjutan dan multidimensional", "Hanya oleh kepala sekolah", "Tanpa instrumen valid"], a: 2 }
        ];

        // RENDER SOAL
        const renderQuiz = () => {
            const container = document.getElementById('questions-container');
            let html = '';

            quizData.forEach((item, index) => {
                let optionsHtml = '';
                item.options.forEach((opt, optIndex) => {
                    optionsHtml += `
                        <div class="relative">
                            <input type="radio" name="q${index}" value="${optIndex}" id="q${index}_${optIndex}" class="option-input peer sr-only" onchange="window.updateProgress()">
                            <label for="q${index}_${optIndex}" class="option-label flex items-center p-4 bg-white border border-gray-200 rounded-xl hover:bg-green-50 peer-focus:ring-2 peer-focus:ring-green-500 peer-focus:ring-offset-2">
                                <div class="circle-check w-5 h-5 border-2 border-gray-300 rounded-full mr-3 flex-shrink-0 transition-colors"></div>
                                <span class="text-sm font-medium text-gray-700">${opt}</span>
                            </label>
                        </div>
                    `;
                });

                html += `
                    <div class="glass-panel p-6 rounded-2xl animate-fade-in-up" style="animation-delay: ${index * 0.05}s">
                        <div class="flex items-start gap-3 mb-4">
                            <span class="bg-green-100 text-green-700 font-bold px-2 py-1 rounded text-xs">No. ${index + 1}</span>
                            <p class="font-bold text-gray-800 text-base">${item.q}</p>
                        </div>
                        <div class="space-y-3">
                            ${optionsHtml}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        };

        // START
        window.startQuiz = () => {
            document.getElementById('start-panel').classList.add('hidden');
            document.getElementById('quiz-form').classList.remove('hidden');
            document.getElementById('timer-display').classList.remove('hidden');
            document.getElementById('timer-display').scrollIntoView({ behavior: 'smooth' });

            quizInterval = setInterval(() => {
                timeRemaining--;
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                document.getElementById('time-left').innerText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeRemaining <= 300) document.getElementById('timer-display').classList.add('timer-warning');
                if (timeRemaining <= 0) {
                    clearInterval(quizInterval);
                    Swal.fire({ title: 'Waktu Habis!', text: 'Dikirim otomatis.', icon: 'info', timer: 2000, showConfirmButton: false }).then(() => window.submitQuiz());
                }
            }, 1000);
        };

        window.updateProgress = () => {
            const answered = document.querySelectorAll('input[type="radio"]:checked').length;
            document.getElementById('answered-count').innerText = answered;
        };

        // SUBMIT
        window.submitQuiz = async () => {
            if(quizInterval) clearInterval(quizInterval);
            const btn = document.getElementById('btn-submit');
            const answered = document.querySelectorAll('input[type="radio"]:checked').length;
            
            if (timeRemaining > 0 && answered < quizData.length) {
                Swal.fire({
                    title: 'Belum Selesai',
                    text: `Baru menjawab ${answered}/${quizData.length}. Yakin kirim?`,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Ya, Kirim',
                    cancelButtonText: 'Lanjut'
                }).then((result) => {
                    if (result.isConfirmed) processScore();
                    else {
                        quizInterval = setInterval(() => {
                            timeRemaining--;
                        }, 1000);
                    }
                });
                return;
            }
            processScore();
        };

        const processScore = async () => {
            const btn = document.getElementById('btn-submit');
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Menilai...';

            let correct = 0;
            quizData.forEach((item, index) => {
                const selectedEl = document.querySelector(`input[name="q${index}"]:checked`);
                if (selectedEl && parseInt(selectedEl.value) === item.a) correct++;
            });

            const score = Math.round((correct / quizData.length) * 100);

            try {
                if (currentUser) {
                    const userRef = doc(db, "users", currentUser.uid);
                    await updateDoc(userRef, { "scores.6": score }); // Save to score 6

                    if (score >= 80) {
                        confetti({ particleCount: 200, spread: 90, origin: { y: 0.6 } });
                        await Swal.fire({
                            title: 'Luar Biasa!',
                            html: `Nilai: <span class="text-5xl font-bold text-green-600 block my-4">${score}</span>Materi selanjutnya terbuka!`,
                            icon: 'success',
                            confirmButtonText: 'Ke Dashboard',
                            confirmButtonColor: '#059669'
                        });
                    } else {
                        await Swal.fire({
                            title: 'Belum Lulus',
                            html: `Nilai: <span class="text-5xl font-bold text-red-500 block my-4">${score}</span>Butuh 80 untuk lulus.`,
                            icon: 'error',
                            confirmButtonText: 'Coba Lagi',
                            confirmButtonColor: '#f59e0b'
                        });
                    }
                    window.location.href = 'index.html';
                }
            } catch (error) {
                Swal.fire('Error', error.message, 'error');
                btn.disabled = false;
                btn.innerText = 'Kirim Jawaban';
            }
        };

        // INIT
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                const docSnap = await getDoc(doc(db, "users", user.uid));
                if (docSnap.exists()) {
                    document.getElementById('user-name').innerText = docSnap.data().name;
                }
                renderQuiz();
            } else {
                Swal.fire({
                    title: 'Sesi Tidak Ditemukan',
                    text: 'Silakan login kembali.',
                    icon: 'warning',
                    confirmButtonText: 'Login',
                    allowOutsideClick: false
                }).then(() => { window.location.href = 'index.html'; });
            }
        });
    </script>
</body>
</html>